"use strict";var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.NavigationTop=React.createClass({displayName:"NavigationTop",handleLogout:function(e){e.preventDefault(),app.user.save({access_token:null}),app.navigate("/",{trigger:!0})},render:function(){for(var e=app.user&&app.user.attributes.data&&app.user.attributes.data.user?app.user.attributes.data.user.username:"User",s=(app.user&&app.user.attributes.data&&app.user.attributes.data.user?app.user.attributes.data.user.is_superuser:!1,[{hash:"#users",text:"Users",className:""}]),t=0;t<s.length;t++)$(location).attr("hash").indexOf(s[t].hash)>-1&&(s[t].className="active");var a="pull-right dropdown";return($(location).attr("hash").indexOf("settings")>-1||$(location).attr("hash").indexOf("password")>-1)&&(a+=" active"),React.createElement("div",{className:"row",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:32}},React.createElement("ul",{className:"nav nav-tabs",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:33}},React.createElement("li",{role:"presentation",className:s[0].className,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:34}},React.createElement("a",{href:s[0].hash,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:34}},s[0].text)),React.createElement("li",{role:"presentation",className:a,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:35}},React.createElement("a",{className:"dropdown-toggle",id:"dropdownMenu1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:36}},e," ",React.createElement("span",{className:"caret",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:37}})),React.createElement("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu1",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:39}},React.createElement("li",{__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:40}},React.createElement("a",{href:"#settings",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:40}},"Settings")),React.createElement("li",{__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:41}},React.createElement("a",{href:"#password",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:41}},"Change Password")),React.createElement("li",{className:"divider",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:42}}),React.createElement("li",{__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:43}},React.createElement("a",{href:"#",onClick:this.handleLogout,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:43}},"Logout"))))),React.createElement("br",{__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:47}}))}}),RDA.Views.AlertView=React.createClass({displayName:"AlertView",render:function(){var e="alertView alert alert-dismissable";return e+=this.props.data.state?" alert-"+this.props.data.state:" hidden",React.createElement("div",{className:e,role:"alert",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:62}},React.createElement("button",{type:"button",className:"close","data-dismiss":"alert",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:63}},React.createElement("span",{"aria-hidden":"true",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:64}},"×"),React.createElement("span",{className:"sr-only",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:65}},"Close")),this.props.data.message)}}),RDA.Views.ModalTrigger=React.createClass({displayName:"ModalTrigger",handleClick:function(e){e.preventDefault(),$(this.refs.payload.getDOMNode()).modal()},render:function(){return React.createElement("span",{onClick:this.handleClick,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:80}},React.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.trigger},__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:81}}),React.createElement(RDA.Views.Modal,{ref:"payload",content:this.props.content,htmlID:this.props.htmlID,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:82}}))}}),RDA.Views.Modal=React.createClass({displayName:"Modal",componentDidMount:function(){$(this.getDOMNode()).modal({background:!0,keyboard:!0,show:!1})},componentWillUnmount:function(){$(this.getDOMNode()).off("hidden")},handleClick:function(e){e.stopPropagation()},render:function(){return React.createElement("div",{onClick:this.handleClick,className:"modal fade",role:"dialog","aria-hidden":"true",id:this.props.htmlID,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:107}},React.createElement("div",{className:"modal-dialog",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:108}},React.createElement("div",{className:"modal-content",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:109}},this.props.content)))}});var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.EmptyView=React.createClass({displayName:"EmptyView",render:function(){return React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-empty.jsx",lineNumber:7}})}}),RDA.Views.renderEmptyView=function(){React.render(React.createElement(RDA.Views.EmptyView,{__source:{fileName:"../../../../../src/templates/views-empty.jsx",lineNumber:14}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.HelloView=React.createClass({displayName:"HelloView",render:function(){return React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-hello.jsx",lineNumber:7}},"Hello")}}),RDA.Views.renderHelloView=function(){React.render(React.createElement(RDA.Views.HelloView,{__source:{fileName:"../../../../../src/templates/views-hello.jsx",lineNumber:16}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.LoginView=React.createClass({displayName:"LoginView",getInitialState:function(){return{alert:{state:null,message:null}}},onFormSubmit:function(e,s){this.setState({alert:{state:e,message:s}})},render:function(){return React.createElement("div",{className:"loginView",id:"form_signin",__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:13}},React.createElement(RDA.Views.LoginForm,{onFormSubmit:this.onFormSubmit,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:14}}),React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:15}}))}}),RDA.Views.LoginForm=React.createClass({displayName:"LoginForm",getInitialState:function(){return{username:null,password:null,ajaxRunning:0}},inputChanged:function(e,s){var t={};t[e]=s.target.value,this.setState(t)},handleFormSubmit:function(e){e.preventDefault();var s=this;s.state.ajaxRunning||(s.setState({ajaxRunning:1}),$.ajax({type:"POST",url:app.Config.API_URI+"/o/token/",success:function(e){s.setState({ajaxRunning:0}),e=JSON.parse(e),"localStorage"in window&&null!==window.localStorage&&(localStorage["RDA_APP.user.at"]=e.access_token),app.user.save({access_token:e.access_token}),app.navigate("/users",{trigger:!0})},data:{grant_type:"password",client_id:app.Config.CLIENT_ID,client_secret:app.Config.CLIENT_SECRET,username:s.state.username,password:s.state.password},error:function(e){s.setState({ajaxRunning:0}),s.props.onFormSubmit("danger","Can't log in. Please check your password.")},dataType:"text"}))},render:function(){var e="",s="";return this.state.ajaxRunning&&(s="disabled",e='<span class="glyphicon glyphicon-refresh spinning"></span> '),React.createElement("form",{className:"loginForm form-signin row",onSubmit:this.handleFormSubmit,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:77}},React.createElement("input",{type:"text",className:"inputUsername form-control",id:"inputUsername",placeholder:"Username",onChange:this.inputChanged.bind(this,"username"),required:!0,autofocus:!0,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:78}}),React.createElement("input",{type:"password",className:"inputPassword form-control",id:"inputUsername",placeholder:"Password",onChange:this.inputChanged.bind(this,"password"),required:!0,autofocus:!0,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:79}}),React.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",id:"loginButton",disabled:s,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:80}},React.createElement("span",{dangerouslySetInnerHTML:{__html:e},__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:80}}),"Login"))}}),RDA.Views.renderLoginView=function(){React.render(React.createElement(RDA.Views.LoginView,{__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:88}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.ChangePasswordView=React.createClass({displayName:"ChangePasswordView",getInitialState:function(){return{alert:{state:null,message:null}}},onFormSubmit:function(e,s){this.setState({alert:{state:e,message:s}})},render:function(){return React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:15}},React.createElement(RDA.Views.NavigationTop,{__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:16}}),React.createElement("h3",{__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:17}},"Change password"),React.createElement("br",{__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:18}}),React.createElement(RDA.Views.ChangePasswordForm,{onFormSubmit:this.onFormSubmit,userid:this.props.userid,__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:19}}),React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:20}}))}}),RDA.Views.ChangePasswordForm=React.createClass({displayName:"ChangePasswordForm",getInitialState:function(){return{user:{},myProfileAjaxRunning:0,ajaxRunning:0}},inputChanged:function(e,s){var t=this.state.user;t[e]=s.target.value,this.setState(t)},handleFormSubmit:function(e){e.preventDefault();var s=this;if(!s.state.ajaxRunning){if(s.state.user.password!=s.state.user.password_confirm)return void s.props.onFormSubmit("danger","Passwords don't match");if(!s.state.user.password.match(/^[\d\w]{4,64}$/))return void s.props.onFormSubmit("danger","Password is too short or includes weird characters");s.setState({ajaxRunning:1}),$.ajax({type:"POST",url:app.Config.API_URI+"/api/v1/user/set_password/",success:function(e){e=JSON.parse(e),s.setState({ajaxRunning:0}),s.props.onFormSubmit("success","Password changed")},beforeSend:function(e,s){e.setRequestHeader("Authorization","Bearer "+app.user.attributes.access_token)},data:{api_key:app.Config.API_KEY,access_token:app.user.attributes.access_token,password:s.state.user.password},error:function(e){s.setState({ajaxRunning:0}),s.props.onFormSubmit("danger","Something's wrong")},dataType:"text"})}},render:function(){var e="",s="";return this.state.ajaxRunning&&(e="<div class='well'><span class='glyphicon glyphicon-refresh spinning'></span></div>"),React.createElement("form",{className:"form-horizontal row",onSubmit:this.handleFormSubmit,__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:90}},React.createElement("span",{dangerouslySetInnerHTML:{__html:s},__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:91}}),React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:92}},React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:93}},React.createElement("label",{htmlFor:"inputPassword1",className:"col-sm-4 control-label",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:94}},"Password"),React.createElement("div",{className:"col-sm-8",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:95}},React.createElement("input",{type:"password",className:"form-control",id:"inputPassword1",placeholder:"Password",onChange:this.inputChanged.bind(this,"password"),value:this.state.user.password,required:!0,__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:96}}))),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:99}},React.createElement("label",{htmlFor:"inputPassword2",className:"col-sm-4 control-label",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:100}},"Re-type Password"),React.createElement("div",{className:"col-sm-8",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:101}},React.createElement("input",{type:"password",className:"form-control",id:"inputPassword2",placeholder:"Re-type Password",onChange:this.inputChanged.bind(this,"password_confirm"),value:this.state.user.password_confirm,required:!0,__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:102}}))),React.createElement("span",{dangerouslySetInnerHTML:{__html:e},__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:106}}),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:108}},React.createElement("div",{className:"col-sm-offset-4 col-sm-8",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:109}},React.createElement("button",{type:"submit",id:"settingsSaveButton",className:"btn btn-primary",__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:110}},"Save")))))}}),RDA.Views.renderChangePasswordView=function(){React.render(React.createElement(RDA.Views.ChangePasswordView,{__source:{fileName:"../../../../../src/templates/views-password.jsx",lineNumber:121}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.UserSettingsView=React.createClass({displayName:"UserSettingsView",getInitialState:function(){return{alert:{state:null,message:null}}},onFormSubmit:function(e,s){this.setState({alert:{state:e,message:s}})},render:function(){return React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:15}},React.createElement(RDA.Views.NavigationTop,{__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:16}}),React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:17}},React.createElement("div",{className:"pull-right",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:18}},React.createElement("a",{href:"#users",className:"btn btn-info",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:18}},"Back to all users ",React.createElement("span",{className:"glyphicon glyphicon-chevron-right",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:18}}))),React.createElement("div",{className:"clearfix",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:19}})),React.createElement("h3",{__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:21}},"Users: edit"),React.createElement(RDA.Views.SettingsForm,{onFormSubmit:this.onFormSubmit,userid:this.props.userid,__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:22}}),React.createElement("hr",{__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:23}}),React.createElement("div",{className:"form-horizontal row",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:24}},React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:25}},React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:26}},React.createElement("div",{className:"col-sm-offset-4 col-sm-8",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:27}},React.createElement(RDA.Views.ChangePasswordModal,{userid:this.props.userid,__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:28}})))),React.createElement("div",{className:"clearfix",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:32}}),React.createElement("br",{__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:33}})),React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:35}}))}}),RDA.Views.ChangePasswordModal=React.createClass({displayName:"ChangePasswordModal",getInitialState:function(){return{data:{password:""},alert:{state:null,message:null},ajaxRunning:0}},inputChanged:function(e,s){var t=this.state.data;"should_notify_user"==e?t[e]=$("#inputShouldNotifyUser").is(":checked"):t[e]=s.target.value,this.setState(t)},handleFormSubmit:function(e){e.preventDefault();var s=this;return s.setState({ajaxRunning:1}),s.state.data.password.match(/^[\d\w]{4,64}$/)?void $.ajax({type:"POST",url:app.Config.API_URI+"/api/v1/user/set_password_for_user/"+s.props.userid,success:function(e){console.log(e),s.setState({data:{password:"",should_notify_user:!1}}),$("#changePasswordModal").modal("hide")},beforeSend:function(e,s){e.setRequestHeader("Authorization","Bearer "+app.user.attributes.access_token)},data:{api_key:app.Config.API_KEY,password:s.state.data.password,should_notify_user:s.state.data.should_notify_user},error:function(e){s.setState({ajaxRunning:0});var t="Hiba a mentés során.";e&&e.responseText&&(t=e.responseText),s.setState({alert:{state:"danger",message:t}})},dataType:"json"}):void s.setState({alert:{state:"danger",message:"Password is too short or includes weird characters."}})},render:function(){return React.createElement(RDA.Views.ModalTrigger,{htmlID:"changePasswordModal",trigger:'<a class="btn btn-sm btn-success">Set new password</a>',content:React.createElement("form",{className:"form-horizontal",onSubmit:this.handleFormSubmit,__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:107}},React.createElement("div",{className:"modal-header",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:108}},React.createElement("h3",{__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:108}},"Set new password")),React.createElement("div",{className:"modal-body col-sm-12",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:109}},React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:110}}),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:111}},React.createElement("label",{htmlFor:"password",className:"col-sm-2 control-label",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:112}},"Password"),React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:113}},React.createElement("input",{type:"text",className:"form-control",id:"password",placeholder:"Password",onChange:this.inputChanged.bind(this,"password"),value:this.state.data.password,__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:114}})),React.createElement("div",{className:"clearfix",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:116}})),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:118}},React.createElement("div",{className:"col-sm-2",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:119}},React.createElement("input",{type:"checkbox",id:"inputShouldNotifyUser",className:"control-checkbox-input pull-right",onClick:this.inputChanged.bind(this,"should_notify_user"),checked:this.state.data.should_notify_user,__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:120}})),React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:122}},React.createElement("label",{htmlFor:"inputShouldNotifyUser",className:"col-sm-10 control-checkbox-label",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:123}},"Send password for the user")))),React.createElement("div",{className:"modal-footer",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:127}},React.createElement("a",{className:"btn btn-default","data-dismiss":"modal",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:128}},"Cancel"),React.createElement("button",{type:"submit",className:"btn btn-primary",__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:129}},"Save"))),__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:103}})}}),RDA.Views.renderUserSettingsView=function(e){React.render(React.createElement(RDA.Views.UserSettingsView,{userid:e,__source:{fileName:"../../../../../src/templates/views-settings-user.jsx",lineNumber:140}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.SettingsView=React.createClass({displayName:"SettingsView",getInitialState:function(){return{alert:{state:null,message:null}}},onFormSubmit:function(e,s){this.setState({alert:{state:e,message:s}})},render:function(){return React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:15}},React.createElement(RDA.Views.NavigationTop,{__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:16}}),React.createElement("h3",{__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:17}},"Settings"),React.createElement("br",{__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:18}}),React.createElement(RDA.Views.SettingsForm,{onFormSubmit:this.onFormSubmit,userid:this.props.userid,__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:19}}),React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:20}}))}}),RDA.Views.SettingsForm=React.createClass({displayName:"SettingsForm",getInitialState:function(){return{user:{},myProfileAjaxRunning:0,ajaxRunning:0}},componentDidMount:function(){var e=this;e.setState({myProfileAjaxRunning:1}),app.API.getUserById({userid:this.props.userid?this.props.userid:"",success:function(s){s&&200!=s.status?(e.setState({myProfileAjaxRunning:0}),e.props.onFormSubmit({alert:{state:"danger",message:s.status+" error."}})):e.setState({myProfileAjaxRunning:0,user:s.user})},error:function(s){e.setState({myProfileAjaxRunning:0}),e.props.onFormSubmit({alert:{state:"danger",message:"Network error. Please try again later."}})}})},inputChanged:function(e,s){var t=this.state.user;t[e]=s.target.value,this.setState(t)},handleFormSubmit:function(e){e.preventDefault();var s=this;s.state.ajaxRunning||(s.setState({ajaxRunning:1}),$.ajax({type:"POST",url:app.Config.API_URI+"/api/v1/user/set_profile/"+(this.props.userid?this.props.userid:""),success:function(e){s.setState({ajaxRunning:0}),e=JSON.parse(e),app.user.save({data:e.access_token}),s.props.onFormSubmit("success","Settings saved.")},beforeSend:function(e,s){e.setRequestHeader("Authorization","Bearer "+app.user.attributes.access_token)},data:{api_key:app.Config.API_KEY,access_token:app.user.attributes.access_token,email:s.state.user.email},error:function(e){s.setState({ajaxRunning:0}),s.props.onFormSubmit("danger","Something is wrong.")},dataType:"text"}))},render:function(){var e="",s="";return this.state.myProfileAjaxRunning&&(s="<div class='well'><span class='glyphicon glyphicon-refresh spinning'></span></div>"),this.state.ajaxRunning&&(e="<div class='well'><span class='glyphicon glyphicon-refresh spinning'></span></div>"),React.createElement("form",{className:"form-horizontal row",onSubmit:this.handleFormSubmit,__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:105}},React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:106}},React.createElement("span",{dangerouslySetInnerHTML:{__html:s},__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:108}}),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:109}},React.createElement("label",{htmlFor:"inputUsername",className:"col-sm-4 control-label",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:110}},"Username"),React.createElement("div",{className:"col-sm-8",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:111}},React.createElement("input",{type:"email",className:"form-control",id:"inputUsername",placeholder:"Username",onChange:this.inputChanged.bind(this,"username"),value:this.state.user.username,required:!0,__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:112}}))),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:115}},React.createElement("label",{htmlFor:"inputEmail",className:"col-sm-4 control-label",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:116}},"E-mail"),React.createElement("div",{className:"col-sm-8",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:117}},React.createElement("input",{type:"email",className:"form-control",id:"inputEmail",placeholder:"E-mail",onChange:this.inputChanged.bind(this,"email"),value:this.state.user.email,required:!0,__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:118}}))),React.createElement("span",{dangerouslySetInnerHTML:{__html:e},__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:122}}),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:124}},React.createElement("div",{className:"col-sm-offset-4 col-sm-8",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:125}},React.createElement("button",{type:"submit",id:"settingsSaveButton",className:"btn btn-primary",__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:126}},"Save")))))}}),RDA.Views.renderSettingsView=function(){React.render(React.createElement(RDA.Views.SettingsView,{__source:{fileName:"../../../../../src/templates/views-settings.jsx",lineNumber:137}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.UserItem=React.createClass({displayName:"UserItem",deleteUser:function(e,s){if(s.preventDefault(),e==app.user.attributes.id)return void alert("You can't delete yourself");if(confirm("Are you sure? This cannot be undone.")){var t=this;t.setState({ajaxRunning:1}),$.ajax({type:"DELETE",url:app.Config.API_URI+"/api/R/users/"+e+"/",success:function(e){t.setState({ajaxRunning:0,data:e}),renderUsersView(),app.navigate("/refresh",{trigger:!0}),app.navigate("/users",{trigger:!0})},beforeSend:function(e,s){e.setRequestHeader("Authorization","Bearer "+app.user.attributes.access_token)},error:function(e){console.log(e),t.setState({ajaxRunning:0});var s="Error while deleting user.";e&&e.responseText&&(s=e.responseText),t.setState({alert:{state:"danger",message:s}})},dataType:"json"})}},render:function(){var e=this.props.data.username;this.props.data.first_name&&this.props.data.last_name?e=this.props.data.first_name+" "+this.props.data.last_name:this.props.data.first_name&&(e=this.props.data.first_name);var s="#users/"+this.props.data.id;return React.createElement("tr",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:55}},React.createElement("td",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:56}},React.createElement("span",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:57}},e)),React.createElement("td",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:59}},React.createElement("div",{className:"pull-right",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:60}},React.createElement("a",{href:"#",onClick:this.deleteUser.bind(this,this.props.data.id),className:"btn btn-sm btn-danger",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:61}},"Delete")," ",React.createElement("a",{href:s,className:"btn btn-sm btn-info",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:63}},"Edit"))))}}),RDA.Views.UserList=React.createClass({displayName:"UserList",render:function(){var e=this.props.data.map(function(e){return React.createElement(RDA.Views.UserItem,{data:e,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:75}})});return React.createElement("table",{className:"table table-striped",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:79}},React.createElement("tbody",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:80}},e))}}),RDA.Views.UserDashboard=React.createClass({displayName:"UserDashboard",getInitialState:function(){return{data:[],alert:{state:null,message:null},ajaxRunning:0}},componentDidMount:function(){var e=this;e.setState({ajaxRunning:1}),$.ajax({type:"GET",url:app.Config.API_URI+"/api/R/users",success:function(s){e.setState({ajaxRunning:0,data:s})},data:{access_token:app.user.attributes.access_token},error:function(s){e.setState({ajaxRunning:0}),e.setState({alert:{state:"danger",message:"No access."}})},dataType:"json"})},render:function(){var e="";return this.state.ajaxRunning&&(e='<div class="well"><span class="glyphicon glyphicon-refresh spinning"></span></div>'),React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:123}},React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:124}}),React.createElement(RDA.Views.NavigationTop,{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:125}}),React.createElement("h3",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:126}},"Users"),React.createElement("br",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:127}}),React.createElement(RDA.Views.UserList,{data:this.state.data,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:128}}),React.createElement(RDA.Views.AddUserModal,{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:129}}),React.createElement("span",{dangerouslySetInnerHTML:{
__html:e},__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:130}}))}}),RDA.Views.AddUserModal=React.createClass({displayName:"AddUserModal",getInitialState:function(){return{data:{},alert:{state:null,message:null},ajaxRunning:0}},inputChanged:function(e,s){var t=this.state.data;t[e]=s.target.value,this.setState(t)},handleFormSubmit:function(e){e.preventDefault();var s=this;s.setState({ajaxRunning:1}),$.ajax({type:"POST",url:app.Config.API_URI+"/api/R/users/",success:function(e){s.setState({ajaxRunning:0,data:e}),$("#addUserModal").modal("hide"),app.navigate("/refresh",{trigger:!0}),app.navigate("/users",{trigger:!0})},beforeSend:function(e,s){e.setRequestHeader("Authorization","Bearer "+app.user.attributes.access_token)},data:{username:s.state.data.username,email:s.state.data.email},error:function(e){console.log(e),s.setState({ajaxRunning:0});var t="Hiba a mentés során.";e&&e.responseText&&(t=e.responseText),s.setState({alert:{state:"danger",message:t}})},dataType:"json"})},render:function(){return React.createElement(RDA.Views.ModalTrigger,{htmlID:"addUserModal",trigger:'<a class="btn btn-danger">New user</a>',content:React.createElement("form",{className:"form-horizontal",onSubmit:this.handleFormSubmit,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:192}},React.createElement("div",{className:"modal-header",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:193}},React.createElement("h3",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:193}},"New user")),React.createElement("div",{className:"modal-body col-sm-12",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:194}},React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:195}}),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:196}},React.createElement("label",{"for":"username",className:"col-sm-2 control-label",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:197}},"Username"),React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:198}},React.createElement("input",{type:"text",className:"form-control",id:"name",placeholder:"Username",onChange:this.inputChanged.bind(this,"username"),__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:199}}))),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:202}},React.createElement("label",{"for":"email",className:"col-sm-2 control-label",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:203}},"E-mail"),React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:204}},React.createElement("input",{type:"text",className:"form-control",id:"name",placeholder:"E-mail",onChange:this.inputChanged.bind(this,"email"),__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:205}})))),React.createElement("div",{className:"modal-footer",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:209}},React.createElement("a",{className:"btn btn-default","data-dismiss":"modal",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:210}},"Cancel"),React.createElement("button",{type:"submit",className:"btn btn-primary",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:211}},"Add user"))),__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:188}})}}),RDA.Views.renderUsersView=function(){React.render(React.createElement(RDA.Views.UserDashboard,{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:222}}),document.getElementById("app"))};
//# sourceMappingURL=views.js.map
